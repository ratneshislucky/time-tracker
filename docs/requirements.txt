# 1. Requirements Document

## 1.1 Purpose

Build a minimalistic, locally hosted time-tracking application to:

* Register “Streams” (major categories).
* Record time spent on “Tasks” tagged to a Stream.
* Analyze time spent between a start/end date via a simple UI.

## 1.2 Scope

### In scope (MVP)

* Local web app UI served by a Java backend.
* Stream management (create, list, optionally edit/disable).
* Time entry (record a task with duration and stream tag).
* Analysis (filter by date range; display total time by stream and by task).
* Persistence in local Postgres.

### Out of scope (MVP)

* Multi-user authentication/authorization.
* Cloud hosting.
* Integrations (Google Sheets writeback, calendars, etc.).
* Complex reporting (week-over-week trends, exports, dashboards).

## 1.3 Users and Personas

* Single user operating on their own workstation (localhost).
* No account management required.

## 1.4 Definitions

* **Stream**: Major category of work (e.g., Delivery, Ops, People, Strategy, Admin).
* **Task**: A specific piece of work logged under a stream (free text label).
* **Time Entry**: A record of time spent on a task under a stream on a given date/time range.

## 1.5 Assumptions

* User is comfortable running `docker compose` (or local Postgres) and `mvn/gradle`.
* App runs on `http://localhost:<port>`.
* Single timezone (system timezone); no cross-timezone support needed for MVP.

## 1.6 Functional Requirements

### FR-1 Stream Registration

**Description:** User can add a new Stream.

* Inputs: Stream name (required), optional description, optional color (optional), status (active by default).
* Constraints:

  * Stream name must be unique (case-insensitive).
  * Name length: 1–50 chars (configurable).
* Outputs: Stream appears in Stream list and in Record Time dropdown.

**Acceptance Criteria**

* Creating a stream persists it to DB.
* Duplicate stream name is rejected with a clear error message.
* Stream list page shows active streams.

---

### FR-2 Record Time (Manual Duration Mode)

**Description:** User records total time spent on a task tagged to a stream.

* Required fields:

  * Stream (select from active streams)
  * Task name (free text)
  * Date (default today)
  * Duration (minutes; integer > 0)
* Optional fields:

  * Start time (optional)
  * End time (optional)
  * Notes (optional)
* Rules:

  * If start/end are provided, duration may be derived; if both present, validate consistency or auto-calculate.
  * Minimum granularity: 1 minute.
  * Task name length: 1–120 chars.

**Acceptance Criteria**

* Submitting creates a time entry row in DB.
* User sees confirmation and can view the entry in a list view.

---

### FR-3 Analysis

**Description:** User selects start date and end date and sees time spent.

* Filters:

  * Start date/time (required)
  * End date/time (required; must be >= start)
  * Optional filter: stream
* Outputs:

  * Total time across all streams in range.
  * Breakdown by stream: sum(duration).
  * Breakdown by task within each stream: sum(duration).
  * Optional: top N tasks.

**Acceptance Criteria**

* Results match DB totals for the date range.
* Empty ranges display “No data” state.
* Range boundary logic is consistent (see TRD for inclusive/exclusive rule).

---

### FR-4 Basic UI Navigation

Three primary pages/actions:

* “Register Stream”
* “Record Time”
* “Analysis”

Plus minimal supportive views:

* Streams list
* Time entries list (optional but recommended for debugging and corrections)

---

### FR-5 Data Correction (Recommended MVP)

**Description:** User can delete or edit a mistaken time entry.

* Edit: update stream, task name, date, duration, notes.
* Delete: remove entry.

**Acceptance Criteria**

* Changes persist and analysis updates accordingly.

---

## 1.7 Non-Functional Requirements

* Runs entirely locally (no external dependencies).
* Response times:

  * Stream list: < 200ms typical local
  * Analysis query for 30 days: < 1s typical local
* Reliability:

  * DB schema migrations included.
* Security:

  * Minimal; localhost only.
  * Basic CSRF protection if using server-rendered forms.
* Maintainability:

  * Clear separation of controller/service/repository layers.
  * Configuration via `application.yaml`.

## 1.8 MVP Deliverables

* Java service + UI
* Postgres schema + migrations
* `docker-compose.yml` (optional but recommended)
* README with local run steps
* Seed data support (optional)

---